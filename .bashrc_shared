# Shared config is now split into ~/.config/shell/*.sh and can be sourced
# from both Bash and Zsh.
# shellcheck disable=SC1090
dotfiles_shell_dir="$HOME/.config/shell"
if [ ! -d "$dotfiles_shell_dir" ]; then
    dotfiles_bashrc_shared_target="$(readlink "$HOME/.bashrc_shared" 2>/dev/null || true)"
    if [ -n "$dotfiles_bashrc_shared_target" ]; then
        dotfiles_shell_dir="$(cd "$(dirname "$dotfiles_bashrc_shared_target")" && pwd)/.config/shell"
    fi
fi
[ -f "$dotfiles_shell_dir/env.sh" ] && . "$dotfiles_shell_dir/env.sh"
# shellcheck disable=SC1090
[ -f "$dotfiles_shell_dir/aliases.sh" ] && . "$dotfiles_shell_dir/aliases.sh"
# shellcheck disable=SC1090
[ -f "$dotfiles_shell_dir/functions.sh" ] && . "$dotfiles_shell_dir/functions.sh"
# shellcheck disable=SC1090
[ -f "$dotfiles_shell_dir/interactive.sh" ] && . "$dotfiles_shell_dir/interactive.sh"

unset dotfiles_shell_dir dotfiles_bashrc_shared_target

# Bash-only init for tools that need to hook the shell.
if [ -n "${BASH_VERSION:-}" ]; then
    if command -v direnv >/dev/null 2>&1; then
        eval "$(direnv hook bash)"
    fi

    if command -v atuin >/dev/null 2>&1; then
        eval "$(atuin init bash)"
    fi

    if command -v zoxide >/dev/null 2>&1; then
        eval "$(zoxide init bash)"
    fi
fi
